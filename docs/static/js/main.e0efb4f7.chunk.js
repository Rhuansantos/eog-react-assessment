(this["webpackJsonpeog-react-visualization-base"]=this["webpackJsonpeog-react-visualization-base"]||[]).push([[0],{230:function(e,t,a){e.exports=a(403)},403:function(e,t,a){"use strict";a.r(t);var r=a(218),n=a(0),c=a.n(n),i=a(21),o=a.n(i),u=a(30),l=a(102),s=a(219),m=a(29),p=a.n(m),f=a(46),v=a(68),d=a(79),b=Object(d.a)({name:"weather",initialState:{temperatureinCelsius:0,temperatureinFahrenheit:0,description:"",locationName:""},reducers:{weatherDataRecevied:function(e,t){var a=t.payload,r=a.description,n=a.locationName,c=a.temperatureinCelsius;e.temperatureinCelsius=c,e.temperatureinFahrenheit=9*c/5+32,e.description=r,e.locationName=n},weatherApiErrorReceived:function(e,t){return e}}}),h=b.reducer,E=b.actions,O=p.a.mark(j),g=p.a.mark(w);function j(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.a)(v.b.error,"Error Received: ".concat(e.payload.error));case 2:case"end":return t.stop()}}),O)}function w(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.c)(E.weatherApiErrorReceived.type,j);case 2:case"end":return e.stop()}}),g)}var y=a(138),N=a.n(y),x=Object(d.a)({name:"metrics",initialState:{multipleMeasurements:{},liveData:{}},reducers:{multipleMeasurementsDataRecevied:function(e,t){e.multipleMeasurements=t.payload},metricLiveDataRecevied:function(e,t){var a;e.liveData=null===(a=[t.payload])||void 0===a?void 0:a.map((function(e){return{[e.metric]:e.value,at:N()(parseInt(e.at)).format("LTS"),unit:e.unit}}))[0]},metricsApiErrorReceived:function(e,t){return e},metricsLiveErrorReceived:function(e,t){return e}}}),D=x.reducer,M=x.actions,R=p.a.mark(A),k=p.a.mark(C);function A(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.a)(v.b.error,"Error Received: ".concat(e.payload.error));case 2:case"end":return t.stop()}}),R)}function C(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.c)(M.metricsApiErrorReceived.type,A);case 2:case"end":return e.stop()}}),k)}var L=p.a.mark(S);function S(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)(w);case 2:return e.next=4,Object(f.b)(C);case 4:case"end":return e.stop()}}),L)}var q={weather:h,metrics:D},F=Object(u.combineReducers)(q),B=a(52),T=a(217),W=a(438),$=a(439),z=(a(240),a(433)),P=a(431),G=a(432),I=a(430),J=a(27),K=a(100),Q=a(51),V=a(442),H=a(443),Z=a(440),U=a(19),X=Object(U.a)((function(e){return{root:{background:e.palette.secondary.main},label:{color:e.palette.primary.main}}}))(Z.a),Y=Object(K.a)({url:"https://react.eogresources.com/graphql"}),_=function(e){var t=e.weather;return{temperatureinFahrenheit:t.temperatureinFahrenheit,description:t.description,locationName:t.locationName}},ee=function(){return c.a.createElement(Q.a,{value:Y},c.a.createElement(te,null))},te=function(){var e=Object(V.a)(),t={latitude:e.latitude||29.7604,longitude:e.longitude||-95.3698},a=Object(B.b)(),r=Object(B.c)(_),i=r.temperatureinFahrenheit,o=r.description,u=r.locationName,l=Object(Q.b)({query:"\nquery($latLong: WeatherQuery!) {\n  getWeatherForLocation(latLong: $latLong) {\n    description\n    locationName\n    temperatureinCelsius\n  }\n}\n",variables:{latLong:t}}),s=Object(J.a)(l,1)[0],m=s.fetching,p=s.data,f=s.error;return Object(n.useEffect)((function(){if(f)a(E.weatherApiErrorReceived({error:f.message}));else if(p){var e=p.getWeatherForLocation;a(E.weatherDataRecevied(e))}}),[a,p,f]),m?c.a.createElement(H.a,null):c.a.createElement(X,{label:"Weather in ".concat(u,": ").concat(o," and ").concat(i,"\xb0")})},ae=Object(I.a)({grow:{flexGrow:1}}),re=function(){var e=ae();return c.a.createElement(P.a,{position:"static"},c.a.createElement(G.a,null,c.a.createElement(z.a,{variant:"h6",color:"inherit",className:e.grow},"santos's"," EOG React Visualization Assessment"),c.a.createElement(ee,null)))},ne=Object(I.a)({wrapper:{height:"100vh"}}),ce=function(e){var t=e.children,a=ne();return n.createElement("div",{className:a.wrapper},t)},ie=a(436),oe=a(437),ue=a(441),le=a(220),se=a(203),me=a(144),pe=a(47),fe=a(138),ve=[],de=[],be={},he=Object(I.a)({wrapper:{width:"100%",height:"70vh",minHeight:"300px"}});function Ee(e){var t=new Map;return e.forEach((function(e){var a=e.at;t.has(a)?t.set(a,Object(me.a)(Object(me.a)({},e),t.get(a))):t.set(a,e)})),Array.from(t.values())}var Oe=function(e){var t=he(),a=e.data,r=e.liveData,i=e.selectedChartOptions;Object(n.useEffect)((function(){!function(e,t){for(var a=0;a<e.length;a++)for(var r=0;r<e[a].measurements.length;r++)ve.push({at:fe(e[a].measurements[r].at).format("LTS"),[e[a].measurements[r].metric]:e[a].measurements[r].value});ve.filter((function(e){return be.hasOwnProperty(e.at)?(be[e.at].data.push(e),!1):(Array.isArray(e)||(e.data=[e.data]),be[e.at]=e,!0)})),de=Ee(ve)}(a)}),[a]),Object(n.useEffect)((function(){de.push(r),de=Ee(de)}),[r]);var o=["#16302B","#694873","#8B728E","#85B79D","#C0E5C8","#5E5D5C","#453643","#28112B"];return c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:t.wrapper},c.a.createElement(pe.e,null,c.a.createElement(pe.d,{data:de,margin:{top:70,right:70,left:70,bottom:70}},c.a.createElement(pe.g,{dataKey:"at",tickCount:30}),c.a.createElement(pe.h,{type:"number",domain:["auto","auto"],tickCount:30,scale:"linear",padding:{top:10,bottom:10}}),c.a.createElement(pe.a,{strokeDasharray:"3 3"}),c.a.createElement(pe.b,null),c.a.createElement(pe.f,null),null===i||void 0===i?void 0:i.map((function(e,t){return c.a.createElement(pe.c,{type:"monotone",key:e.value,dataKey:e.value,stroke:o[t],dot:!1,isAnimationActive:!1})}))))))},ge=a(434),je=a(435),we=Object(I.a)({root:{width:"100%"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),ye=function(e){var t=we(),a=Object(n.useState)({metric:"",unit:"",value:""}),r=Object(J.a)(a,2),i=r[0],o=r[1],u=[e.liveData].find((function(t){return t.metric===e.info.value})),l=void 0!==u?u:i;return Object(n.useEffect)((function(){void 0!==l&&o(l)}),[l]),c.a.createElement(ge.a,{className:t.root},c.a.createElement(je.a,null,c.a.createElement(z.a,{variant:"h5",component:"h2"},e.info.label),c.a.createElement(z.a,{className:t.pos,color:"textSecondary"},"".concat(i.value," - ").concat(i.unit))))},Ne=Object(se.a)(),xe=(new Date).valueOf(),De=Object(I.a)((function(e){return Object(ue.a)({select:{padding:e.spacing(2)}})})),Me='\nquery($input: [MeasurementQuery] = [\n  {metricName: "tubingPressure", after: '.concat(xe-18e5,", before: ").concat(xe,'},\n  {metricName: "casingPressure", after: ').concat(xe-18e5,", before: ").concat(xe,'},\n  {metricName: "oilTemp", after: ').concat(xe-18e5,", before: ").concat(xe,'},\n  {metricName: "flareTemp", after: ').concat(xe-18e5,", before: ").concat(xe,'},\n  {metricName: "waterTemp", after: ').concat(xe-18e5,", before: ").concat(xe,'},\n  {metricName: "injValveOpen", after: ').concat(xe-18e5,", before: ").concat(xe,"}\n]\n){\n  getMultipleMeasurements(input: $input) {\n    metric\n    measurements {\n     at\n     value\n     metric\n     unit\n    }\n  }\n}"),Re=function(e){var t=e.metrics;return{multipleMeasurements:t.multipleMeasurements,liveData:t.liveData}},ke=function(){var e=De(),t=Object(B.b)(),a=Object(n.useState)([]),r=Object(J.a)(a,2),i=r[0],o=r[1],u=Object(B.c)(Re),l=u.multipleMeasurements,s=u.liveData,m=Object(Q.c)({query:"\n  subscription {\n    newMeasurement{\n      metric\n      at\n      value\n      unit\n    }\n  }\n"}),p=Object(J.a)(m,1)[0],f=Object(Q.b)({query:Me}),v=Object(J.a)(f,1)[0];return Object(n.useEffect)((function(){var e=v.data,a=v.error;a?t(M.metricsApiErrorReceived({error:null===a||void 0===a?void 0:a.message})):e&&t(M.multipleMeasurementsDataRecevied(null===e||void 0===e?void 0:e.getMultipleMeasurements))}),[t,v]),Object(n.useEffect)((function(){var e=p.data,a=p.error;a?t(M.metricsLiveErrorReceived({error:null===a||void 0===a?void 0:a.message})):e&&t(M.metricLiveDataRecevied(null===e||void 0===e?void 0:e.newMeasurement))}),[t,p]),(null===v||void 0===v?void 0:v.fetching)?c.a.createElement(H.a,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(ie.a,{maxWidth:"lg"},c.a.createElement(oe.a,{item:!0,xs:10,className:e.select},c.a.createElement(le.a,{onChange:function(e){o(e)},closeMenuOnSelect:!0,components:Ne,isMulti:!0,options:function(){var e=[];return Object.entries(l).forEach((function(t){e.push({value:t[1].metric,label:t[1].metric.replace(/([A-Z])/g," $1")})})),e}()}))),c.a.createElement(oe.a,{container:!0,spacing:1,className:e.select},null===i||void 0===i?void 0:i.map((function(e,t){return c.a.createElement(oe.a,{key:t,item:!0,xs:2},c.a.createElement(ye,{info:e,liveData:p.data.newMeasurement}))}))),c.a.createElement(oe.a,{container:!0,spacing:1,className:e.select}),c.a.createElement(Oe,{data:l,liveData:s,selectedChartOptions:i}))},Ae=function(){var e=Object(l.composeWithDevTools)({}),t=Object(s.a)(),a=Object(u.applyMiddleware)(t),r=Object(u.createStore)(F,e(a));return t.run(S),r}(),Ce=Object(T.a)({palette:{primary:{main:"rgb(39,49,66)"},secondary:{main:"rgb(197,208,222)"},background:{default:"rgb(226,231,238)"}}}),Le=function(){return c.a.createElement(W.a,{theme:Ce},c.a.createElement($.a,null),c.a.createElement(B.a,{store:Ae},c.a.createElement(ce,null,c.a.createElement(re,null),c.a.createElement(ke,null),c.a.createElement(v.a,null))))},Se=new(a(216).SubscriptionClient)("wss://react.eogresources.com/graphql",{reconnect:!0}),qe=Object(K.a)({url:"https://react.eogresources.com/graphql",exchanges:[].concat(Object(r.a)(K.b),[Object(K.c)({forwardSubscription:function(e){return Se.request(e)}})])});o.a.render(c.a.createElement(Q.a,{value:qe},c.a.createElement(Le,null)),document.getElementById("root"))}},[[230,1,2]]]);
//# sourceMappingURL=main.e0efb4f7.chunk.js.map